{"ast":null,"code":"var _jsxFileName = \"/Users/dea/Documents/workspace_dea/00.practice-musical-list/src/pages/list/List.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect, useRef } from \"react\";\nimport Modal from \"../components/modal/Modal\";\nimport apiFetch from '../components/api';\nimport './list.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst List = () => {\n  _s();\n\n  const numLimit = 2;\n  const [numPage, setNumPage] = useState(1);\n  const [totalCnt, setTotalCnt] = useState(0);\n  const [musicalList, setMusicalList] = useState([]);\n  const [modalData, setModalData] = useState([]);\n  const [error, setError] = useState(null);\n  const [activeIndex, setActiveIndex] = useState(1);\n  const [showModal, setShowModal] = useState(false);\n  const loadingRef = useRef(false);\n\n  const closeModal = () => {\n    setShowModal(false);\n  };\n\n  const showMore = () => {\n    setNumPage(numPage + 1);\n  };\n\n  useEffect(() => {\n    const getData = async () => {\n      try {\n        loadingRef.current = true;\n        const response = await apiFetch({\n          url: '/musicalClasses',\n          params: {\n            '_limit': numLimit,\n            '_page': numPage\n          }\n        });\n        const response2 = await apiFetch({\n          url: '/musicalClass',\n          params: {\n            'musicalClassId': activeIndex\n          }\n        });\n        loadingRef.current = false;\n        setTotalCnt(response.data.length);\n        console.log(response);\n        console.log(response2);\n        setMusicalList(state => state.concat(response.data));\n        setModalData(response2.data);\n      } catch (err) {\n        console.log(err);\n        setError(true);\n      }\n    };\n\n    getData();\n  }, [numPage, modalData]);\n  if (loadingRef.current) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"cont_loading\",\n    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"ico_loading\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 64\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"txt_loading\",\n      children: \"loading\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 101\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 34\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"cont_error\",\n    children: /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"txt_error\",\n      children: \"\\uC5D0\\uB7EC\\uAC00 \\uBC1C\\uC0DD\\uD588\\uC2B5\\uB2C8\\uB2E4\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 49\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cont_musical\",\n      children: musicalList.length > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"list_musical\",\n          children: musicalList.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"item_musical\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn_musical\",\n              onClick: () => {\n                setShowModal(true);\n                setActiveIndex(item.musicalClassId);\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"musical_thumb\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"thumb_img\",\n                  style: {\n                    backgroundImage: \"url(\" + item.image + \")\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 75,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 74,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"musical_info\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"musical_title\",\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    className: \"txt_title\",\n                    children: item.musicalClassName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 80,\n                    columnNumber: 19\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"box_tag\",\n                    children: item.musicalTag.length !== 0 ? item.musicalTag.map((tag, index) => /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"tag_g\",\n                      children: tag\n                    }, index, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 84,\n                      columnNumber: 23\n                    }, this)) : null\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 81,\n                    columnNumber: 19\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 79,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"musical_price\",\n                  children: /*#__PURE__*/_jsxDEV(\"em\", {\n                    className: \"num_price\",\n                    children: [item.price, \"\\uC6D0\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 91,\n                    columnNumber: 19\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 90,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"musical_desc\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"txt_g\",\n                    children: item.period\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 94,\n                    columnNumber: 19\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"txt_g\",\n                    children: [item.runningTime, \"\\uBD84\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 95,\n                    columnNumber: 19\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"txt_g txt_place\",\n                    children: item.musicalConcertHall\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 96,\n                    columnNumber: 19\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 93,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 78,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 13\n            }, this)\n          }, `musical_${item.musicalClassId}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 11\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 9\n        }, this), numPage <= totalCnt && /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn_more\",\n          onClick: showMore,\n          children: \"\\uB354\\uBCF4\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"area_error\",\n        children: \"\\uB370\\uC774\\uD130\\uB97C \\uBD88\\uB7EC\\uC62C \\uC218 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }, this), showModal && /*#__PURE__*/_jsxDEV(Modal, {\n      activeData: activeIndex,\n      closeModal: closeModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(List, \"90pmOttAaAPL1Zy/j2QjVnlp5G4=\");\n\n_c = List;\nexport default List;\n\nvar _c;\n\n$RefreshReg$(_c, \"List\");","map":{"version":3,"sources":["/Users/dea/Documents/workspace_dea/00.practice-musical-list/src/pages/list/List.jsx"],"names":["useState","useEffect","useRef","Modal","apiFetch","List","numLimit","numPage","setNumPage","totalCnt","setTotalCnt","musicalList","setMusicalList","modalData","setModalData","error","setError","activeIndex","setActiveIndex","showModal","setShowModal","loadingRef","closeModal","showMore","getData","current","response","url","params","response2","data","length","console","log","state","concat","err","map","item","musicalClassId","backgroundImage","image","musicalClassName","musicalTag","tag","index","price","period","runningTime","musicalConcertHall"],"mappings":"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","sourcesContent":["import { useState, useEffect, useRef } from \"react\";\nimport Modal from \"../components/modal/Modal\";\nimport apiFetch from '../components/api';\nimport './list.scss';\n\nconst List = () => {\n  const numLimit = 2;\n  const [numPage, setNumPage] = useState(1);\n  const [totalCnt, setTotalCnt] = useState(0);\n  const [musicalList, setMusicalList] = useState([]);\n  const [modalData, setModalData] = useState([]);\n  const [error, setError] = useState(null);\n  const [activeIndex, setActiveIndex] = useState(1);\n  const [showModal, setShowModal] = useState(false);\n  const loadingRef = useRef(false);\n  \n\n  const closeModal = () => {\n    setShowModal(false);\n  }\n\n  const showMore = () => {\n    setNumPage(numPage + 1);\n  }\n\n\n  useEffect(() =>{\n    const getData = async () => {\n      try {\n        loadingRef.current = true;\n\n        const response = await apiFetch({\n          url: '/musicalClasses',\n          params: {\n            '_limit': numLimit,\n            '_page': numPage\n          }\n        })\n\n        const response2 = await apiFetch({\n          url: '/musicalClass',\n          params: {\n            'musicalClassId': activeIndex\n          }\n        })\n\n\n        loadingRef.current = false;\n        setTotalCnt(response.data.length)\n        console.log(response)\n        console.log(response2)\n\n        setMusicalList(state => state.concat(response.data))\n        setModalData(response2.data)\n      } catch (err) {\n        console.log(err)\n        setError(true);\n      }\n    }\n    getData();\n  }, [numPage, modalData])\n\n  if (loadingRef.current) return <div className=\"cont_loading\"><span className=\"ico_loading\"></span><span className=\"txt_loading\">loading</span></div>;\n  if (error) return <div className=\"cont_error\"><span className=\"txt_error\">에러가 발생했습니다</span></div>;\n  return (\n    <>\n    <div className=\"cont_musical\">\n      {musicalList.length > 0 ?\n        <>\n        <ul className=\"list_musical\">\n          {musicalList.map(item => (\n          <li key={`musical_${item.musicalClassId}`} className=\"item_musical\">\n            <button type=\"button\" className=\"btn_musical\" onClick={()=> { setShowModal(true);setActiveIndex(item.musicalClassId) }}>\n              <div className=\"musical_thumb\">\n                <span className=\"thumb_img\" style={{backgroundImage:\"url(\"+item.image+\")\"}}></span>\n              </div>\n  \n              <div className=\"musical_info\">\n                <div className=\"musical_title\">\n                  <strong className=\"txt_title\">{item.musicalClassName}</strong>\n                  <div className=\"box_tag\">\n                    {item.musicalTag.length !== 0 ?\n                      item.musicalTag.map((tag, index) => (\n                      <span key={index} className=\"tag_g\">{tag}</span>\n                      ))\n                      : null\n                    }\n                  </div>\n                </div>\n                <div className=\"musical_price\">\n                  <em className=\"num_price\">{item.price}원</em>\n                </div>\n                <div className=\"musical_desc\">\n                  <span className=\"txt_g\">{item.period}</span>\n                  <span className=\"txt_g\">{item.runningTime}분</span>\n                  <span className=\"txt_g txt_place\">{item.musicalConcertHall}</span>\n                </div>\n              </div>\n            </button>\n          </li>\n          ))}\n        </ul>\n        {numPage <= totalCnt && (\n            <button type=\"button\" className=\"btn_more\" onClick={showMore}>더보기</button>\n         )\n        } \n        </>\n        : <div className=\"area_error\">데이터를 불러올 수 없습니다.</div>\n      }\n    </div>\n    {showModal &&\n      <Modal activeData={activeIndex} closeModal={closeModal} />\n    }\n    </>\n  )\n}\n\nexport default List;"]},"metadata":{},"sourceType":"module"}